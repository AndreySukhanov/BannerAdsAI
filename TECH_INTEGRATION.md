# üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è BannerAdsAI

## TL;DR –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

```javascript
// –ü–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞
window.BANNER_USER_ID = 12345;

// –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å –≤–∞—à–∏–º userId
```

## üéØ –ß—Ç–æ –∏–∑–º–µ–Ω–∏–ª–æ—Å—å

- **–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç –±–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏** ‚úÖ
- **–ü—Ä–∏–≤—è–∑–∫–∞ –∫ –≤–Ω–µ—à–Ω–µ–º—É userId** ‚úÖ  
- **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å** (—Ä–∞–±–æ—Ç–∞–µ—Ç standalone) ‚úÖ
- **–ò—Å—Ç–æ—Ä–∏—è –∏ –∞–Ω–∞–ª–∏—Ç–∏–∫–∞** –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ userId ‚úÖ

## üìù –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### 1. –°–∏—Å—Ç–µ–º–∞ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–æ–≤ ID:
1. `window.BANNER_USER_ID` (–¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
2. `localStorage` (–¥–ª—è standalone)  
3. –ê–≤—Ç–æ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è (fallback)

### 2. API –∏–∑–º–µ–Ω–µ–Ω–∏—è:
- –í—Å–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ endpoints —Ä–∞–±–æ—Ç–∞—é—Ç
- `sessionId` –∑–∞–º–µ–Ω–µ–Ω –Ω–∞ `userId` –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ
- –ò—Å—Ç–æ—Ä–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–º—É ID

### 3. React –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:
```jsx
// –í–∞—à–∞ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞
<BannerAdsAI userId={user.id} />

// –í–Ω—É—Ç—Ä–∏ BannerAdsAI
export default function MainApp({ userId }) {
  // userId –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º
}
```

## ‚ö° –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### HTML + JavaScript
```html
<script>
  window.BANNER_USER_ID = 12345;
</script>
<script src="/bannerads/dist/index.js"></script>
```

### React
```jsx
import BannerAdsAI from './BannerAdsAI';

<BannerAdsAI userId={user.id} />
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
```javascript
console.log(window.BannerAdsAI.isReady());
// { ready: true, userInfo: { userId: "12345", mode: "integrated" } }
```

## üîå Backend –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è

### API endpoints –æ—Å—Ç–∞–ª–∏—Å—å —Ç–µ –∂–µ:
```
GET  /api/history/:userId
GET  /api/history/:userId/stats  
DELETE /api/history/:userId/clear
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:
```bash
OPENAI_API_KEY=your-key
RECRAFT_API_KEY=your-key
PORT=3006
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é:
```javascript
// 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å ID
window.BANNER_USER_ID = 'test_user_123';

// 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ
window.BannerAdsAI.isReady();

// 3. –°–æ–∑–¥–∞—Ç—å –±–∞–Ω–Ω–µ—Ä –∏ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é
// –ò—Å—Ç–æ—Ä–∏—è –¥–æ–ª–∂–Ω–∞ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å—Å—è –ø–æ–¥ 'test_user_123'
```

### Debug —Ä–µ–∂–∏–º:
```javascript
// –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏
localStorage.setItem('BANNER_DEBUG', 'true');

// –í –∫–æ–Ω—Å–æ–ª–∏ –±—É–¥—É—Ç –ª–æ–≥–∏:
// [MainApp] External User ID set: 12345
// [HistoryAPI] Getting history for session: 12345
```

## üö¶ –°—Ç–∞—Ç—É—Å—ã –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- **integrated** - —Ä–∞–±–æ—Ç–∞–µ–º —Å –≤–Ω–µ—à–Ω–∏–º userId
- **standalone** - –ª–æ–∫–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º (localStorage)

```javascript
const { mode } = window.BannerAdsAI.getUserId();
if (mode === 'integrated') {
    console.log('‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–Ω–∞');
} else {
    console.log('‚ö†Ô∏è Standalone —Ä–µ–∂–∏–º');
}
```

## üîÑ –ú–∏–≥—Ä–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö

–ï—Å–ª–∏ –Ω—É–∂–Ω–æ –ø–µ—Ä–µ–Ω–µ—Å—Ç–∏ –∏—Å—Ç–æ—Ä–∏—é –∏–∑ localStorage –≤ –Ω–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É:
```javascript
// –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ
const oldSessionId = localStorage.getItem('bannerads_session_id');

// API –¥–ª—è –º–∏–≥—Ä–∞—Ü–∏–∏ (–Ω—É–∂–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏)
POST /api/history/migrate
{
  "oldSessionId": "session_123_abc",
  "newUserId": "user_12345"
}
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **userId –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –î–û –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ React**
2. **–°—Ç—Ä–æ–∫–æ–≤—ã–µ –∏ —á–∏—Å–ª–æ–≤—ã–µ ID –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è**  
3. **–ü—É—Å—Ç—ã–µ ID (0, null, undefined) –∏–≥–Ω–æ—Ä–∏—Ä—É—é—Ç—Å—è**
4. **–î–∞–Ω–Ω—ã–µ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω—ã –ø–æ userId**

## üìã –ß–µ–∫–ª–∏—Å—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

- [ ] Backend —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç –∏ –¥–æ—Å—Ç—É–ø–µ–Ω
- [ ] API –∫–ª—é—á–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã (OpenAI + Recraft)
- [ ] `window.BANNER_USER_ID` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –ø–µ—Ä–µ–¥ –∑–∞–≥—Ä—É–∑–∫–æ–π
- [ ] Frontend –∫–æ–º–ø–∏–ª–∏—Ä—É–µ—Ç—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
- [ ] –ò—Å—Ç–æ—Ä–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º userId
- [ ] –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ä–∞–∑–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è—Ö

## üõ† –ü–æ–ª–µ–∑–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã

```javascript
// –°–º–µ–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
window.BannerAdsAI.setUserId(newUserId);

// –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ  
window.BannerAdsAI.getUserId();

// –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å
window.BannerAdsAI.isReady();

// –í–µ—Ä—Å–∏—è API
console.log(window.BannerAdsAI.version); // "2.2.0"
```

---

**–í—Ä–µ–º—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏: ~30 –º–∏–Ω—É—Ç** ‚è±Ô∏è  
**–°–ª–æ–∂–Ω–æ—Å—Ç—å: –ù–∏–∑–∫–∞—è** üü¢  
**–ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: –¢–æ–ª—å–∫–æ userId** üì¶